---
#
# This is the canonical configuration for the `README.md`
# Run `make readme` to rebuild the `README.md`
#

# Name of this project
name: terraform-aws-codebuild-lambda

# Tags of this project
tags:
  - aws
  - terraform
  - terraform-modules
  - lambda
  - codebuild
  - codepipeline

# License of this project
license: "APACHE2"

# Copyrights
copyrights:
  - name: "Airwalk Consulting Ltd."
    url: "https://www.airwalkconsulting.com/"
    year: "2019"

# Canonical GitHub Enterprise repo 
github_repo: vishbhalla/terraform-aws-codebuild-lambda

# Short description of this project
description: |-
  This Teraform module sets up a CodeBuild/CodePipeline project that deploys Teraform.

# Pre-requisites
requirements: |-
   * Terraform 0.12.x
  
# How to use this project
usage: |-
  ```hcl
  module "codebuild_tf_lambda_deploy" {
    source = "git::https://github.com/vishbhalla/terraform-aws-codebuild-lambda.git"

    region    = "eu-west-1"
    name      = "somename"
    namespace = "airwalk"
    stage     = "dev"
    tags      = {
      Owner = "Airwalk Consulting"
    }

    github_owner                  = "github-User-Name"
    github_repo                   = "github_repo_name"
    ssm_param_name_github_token   = "ssm/path_to/github_oath_token"
    codebuild_project_description = "An project that deploys a lambda"

    codebuild_iam_policy_arns = [
      "arn:aws:iam::aws:policy/AWSLambdaFullAccess",
      "arn:aws:iam::aws:policy/AmazonS3FullAccess",
      "arn:aws:iam::aws:policy/CloudWatchLogsFullAccess",
      "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess",
      "arn:aws:iam::aws:policy/IAMFullAccess",
    ]

    codepipeline_iam_policy_arns = [
      "arn:aws:iam::aws:policy/AmazonS3FullAccess",
      "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess"
    ]

    codebuild_env_vars = {
      {
        name  = "TF_VERSION"
        value = "0.12.3"
      },
      {
        name  = "TF_ENV"
        value = "account1_env_vars_file"
      },
      {
        name  = "TF_ACTION"
        value = "apply"
      },
      {
        name  = "TF_IN_AUTOMATION"
        value = "1"
      },
      {
        name  = "TF_LOG"
        value = "DEBUG"
      }
    ]
  }
  ```

  Also see [this example project](https://github.com/vishbhalla/terraform-aws-codebuild-lambda-example).

include:
  - "docs/terraform.md"
  - "docs/targets.md"
